\input{standalone.tex}
\newcommand{\xscale}{0.6}
\newcommand{\yscale}{0.6}
\newcommand{\object}[3]{
	\draw [draw,fill=gray!50] (#1*\xscale,0) rectangle (#1*\xscale+\xscale,\yscale);
	\draw (#1*\xscale + \xscale*0.5,0.5*\yscale) node{\Var{#2}};
	\draw (#1*\xscale+1.15*\xscale,-0.15*\yscale) node[anchor=south east,font=\tiny]{$#3$};
}
\newcommand{\objectFaded}[2]{
	\draw [draw,fill=gray!25] (#1*\xscale,0) rectangle (#1*\xscale+\xscale,\yscale);
	\draw (#1*\xscale + \xscale*0.5,0.5*\yscale) node{\Var{#2}};
}
\newcommand{\border}[2]{
	\draw [very thick] (#1*\xscale,0) rectangle (#1*\xscale + #2*\xscale,\yscale);
}
\newcommand{\arrowTop}[4]{
	\draw [->,thick,#4] (#1*\xscale,\yscale) -- (#1*\xscale,\yscale+#3) 
			-- (#2*\xscale,\yscale+#3) -- (#2*\xscale,\yscale);
}
\newcommand{\arrowBottom}[4]{
	\draw [->,thick,#4] (#1*\xscale,0) -- (#1*\xscale,-#3) --
			(#2*\xscale,-#3) -- (#2*\xscale,0);
}
\newcommand{\arrowRoots}[2]{
	\draw [->,thick] (#1*\xscale,\yscale + #2) -- (#1*\xscale,\yscale);
}
\newcommand{\toNursery}{ctcoloraccessory}
\newcommand{\toMature}{ctcolormain}

\begin{document}
	\begin{tikzpicture}	
		\object{0}{a}{0}
		\objectFaded{1}{b}
		\object{2}{c}{0}
		\object{3}{d}{0}
		\object{4}{e}{0}
		\object{5}{f}{0}
		\object{6}{g}{0}
		\object{9}{A}{*}
		\object{10}{B}{*}
		\object{11}{C}{1}
		\object{12}{D}{0}
		\object{13}{E}{0}
		\object{14}{b'}{1}
		
		\arrowRoots{14.5}{0.75}
		\arrowRoots{11.5}{0.75}
		
		\arrowTop{5.25}{2.5}{0.35}{}				% f -> c
		\arrowTop{10.5}{5.75}{0.55}{\toNursery}		% B -> f
		\arrowTop{9.5}{6.5}{0.35}{\toNursery}		% A -> g
		\arrowBottom{14.5}{5.25}{0.55}{}			% b' -> f
		\arrowBottom{6.5}{4.5}{0.75}{}				% g -> e
		\arrowBottom{5.75}{12.5}{0.35}{\toMature}	% f -> D
		\arrowBottom{0.5}{13.5}{0.95}{\toMature}		% a -> E
		
		\draw (2*\xscale,-2.5*\yscale) node[right]{\textbf{toDo:} \Var{b'}};
		\draw (11*\xscale,-2.5*\yscale) node[right]{\textbf{log:} $\Var{A} \rightarrow \Var{g}$, $\Var{B} \rightarrow \Var{f}$};

		\border{0}{7}
		\border{9}{10}
		\draw (3.5*\xscale,\yscale*3) node{\Nursery};
		\draw (14*\xscale,\yscale*3) node{\Mature};
	\end{tikzpicture}
\end{document}